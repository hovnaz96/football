!function(e){function s(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,s),n.l=!0,n.exports}var t={};s.m=e,s.c=t,s.i=function(e){return e},s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},s.p="",s(s.s=53)}({1:function(e,s){e.exports=function(e,s,t,a){var n,r=e=e||{},i=typeof e.default;"object"!==i&&"function"!==i||(n=e,r=e.default);var o="function"==typeof r?r.options:r;if(s&&(o.render=s.render,o.staticRenderFns=s.staticRenderFns),t&&(o._scopeId=t),a){var c=Object.create(o.computed||null);Object.keys(a).forEach(function(e){var s=a[e];c[e]=function(){return s}}),o.computed=c}return{esModule:n,exports:r,options:o}}},10:function(e,s,t){function a(){r=setTimeout(function(){var e=document.getElementById("chat-block");e.scrollTop=e.scrollHeight},300)}function n(e){var s=e.getHours(),t=e.getMinutes(),a=s>=12?"pm":"am";return s%=12,s=s||12,t=t<10?"0"+t:t,s+":"+t+" "+a}Vue.component("chat-form",t(42)),Vue.component("chat-messages",t(43)),Vue.component("messages-users",t(45));var r;new Vue({el:"#chat",data:{messages:[],message_users:[],user_name:"User",to_id:"",first_user_id:"0",first_user_name:"User",current_user_chat:"0"},created:function(){var e=this;this.fetchUsers();var s=new Date,t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Echo.private("chat").listen("MessageSent",function(i){e.current_user_chat==i.from_id.id&&e.messages.push({message:i.message.message,from_id:i.from_id,created_at:t[s.getMonth()+1]+" "+s.getDate()+", "+s.getFullYear()+" "+n(s)}),clearTimeout(r),a()})},methods:{fetchUsers:function(){var e=this;axios.get("/messagesUsers").then(function(s){s.data.length&&(e.first_user_id=s.data[0].id,e.first_user_name=s.data[0].full_name),e.message_users=s.data})},refreshMessages:function(e){this.messages=e},userName:function(e){this.user_name=e},setToID:function(e){this.to_id=e},setCurrentUserChat:function(e){this.current_user_chat=e},addMessage:function(e){this.messages.push(e),axios.post("/messages",e).then(function(e){})}}})},31:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={props:["from_id","to_id","user_name","show"],data:function(){return{newMessage:""}},methods:{sendMessage:function(e){if(e.preventDefault(),""==this.newMessage.trim())return!1;var s=new Date,t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this.$emit("messagesent",{from_id:this.from_id,message:this.newMessage,to_id:this.to_id,created_at:t[s.getMonth()]+" "+s.getDate()+", "+s.getFullYear()+" "+s.getHours()+":"+s.getMinutes()+"am"}),this.newMessage="",setTimeout(function(){var e=document.getElementById("chat-block");$("#chat-block").animate({scrollTop:e.scrollHeight},"normal")},200)}}}},32:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={props:["messages","user_name"]}},34:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={props:["message_users","first_user_id","first_user_name"],updated:function(){var e=window.location.href.split("/");$.isNumeric(e[e.length-2])?(this.showMessages(e[e.length-2],e[e.length-1]),this.$emit("current_user_chat",e[e.length-2])):(this.showMessages(this.first_user_id,this.first_user_name),this.$emit("current_user_chat",this.first_user_id))},methods:{showMessages:function(e,s){this.fetchMessagesByID(e),this.$emit("usermame",s),this.$emit("toid",e),this.$emit("current_user_chat",e),$(".user-box-chat").removeClass("user-box-chat-active"),$(".user-box-chat[data-id="+e+"]").addClass("user-box-chat-active")},fetchMessagesByID:function(e){var s=this;axios.post("/messages/"+e).then(function(e){s.$emit("messagerefresh",e.data),e.data&&setTimeout(function(){var e=document.getElementById("chat-block");$("#chat-block").animate({scrollTop:e.scrollHeight},"fast")},200)})}}}},42:function(e,s,t){var a=t(1)(t(31),t(49),null,null);e.exports=a.exports},43:function(e,s,t){var a=t(1)(t(32),t(46),null,null);e.exports=a.exports},45:function(e,s,t){var a=t(1)(t(34),t(47),null,null);e.exports=a.exports},46:function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.messages.length,expression:"messages.length"}]},[t("div",{staticClass:"info-block style-2 header-block"},[t("div",{staticClass:"be-large-post-align message-with-text"},[t("h3",{staticClass:"info-block-label"},[e._v("Message with "+e._s(e.user_name.replace("-"," ")))])])]),e._v(" "),t("div",{staticClass:"be-large-post-align",attrs:{id:"chat-block"}},[t("div",e._l(e.messages,function(s){return t("div",{staticClass:"be-comment responsive-overflow_hidden-margin-0"},[t("div",{staticClass:"be-img-comment width-0 "},[t("a",{attrs:{href:""}},[t("img",{staticClass:"be-ava-comment message-avatar",attrs:{src:s.from_id.user_profile_image_medium,alt:""}})])]),e._v(" "),t("div",{staticClass:"be-comment-content"},[t("span",{staticClass:"be-comment-name messages-name"},[t("a",{attrs:{href:""}},[e._v(e._s(s.from_id.full_name))])]),e._v(" "),t("span",{staticClass:"be-comment-time time-message"},[t("i",{staticClass:"fa fa-clock-o"}),e._v(e._s(s.created_at)+"\n                        ")]),e._v(" "),t("p",{staticClass:"be-comment-text message-text"},[e._v("\n                            "+e._s(s.message)+"\n                        ")])])])}))])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.messages.length,expression:"!messages.length"}],staticClass:"no-messages"},[e._v("\n        Looks like you don't have any  messages yet\n    ")])])},staticRenderFns:[]}},47:function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.message_users.length,expression:"message_users.length"}]},e._l(e.message_users,function(s){return t("div",{staticClass:"noto-entry style-3 user-box-chat",class:[s.id==e.first_user_id?"user-box-chat-active":""],attrs:{"data-id":s.id},on:{click:function(t){e.showMessages(s.id,s.full_name)}}},[t("div",{staticClass:"noto-content clearfix"},[t("div",{staticClass:"noto-img"},[t("a",{attrs:{href:s.user_profile_url}},[t("img",{staticClass:"be-ava-comment",attrs:{src:s.user_profile_image_large,alt:""}})])]),e._v(" "),t("div",{staticClass:"noto-text"},[t("div",{staticClass:"noto-text-top"},[t("span",{staticClass:"noto-name"},[t("a",{attrs:{href:s.user_profile_url}},[e._v(e._s(s.full_name))])]),e._v(" "),t("span",{staticClass:"noto-date pull-right"},[t("i",{staticClass:"fa fa-clock-o"}),e._v(" "+e._s(s.last_message.created_at))])]),e._v(" "),t("div",{staticClass:"noto-message"},[e._v(e._s(s.last_message.message))])])])])}))},staticRenderFns:[]}},49:function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("form",{directives:[{name:"show",rawName:"v-show",value:e.show.length,expression:"show.length"}]},[t("div",{staticClass:"hidden-responsive"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"form-label"},[e._v("Your Message")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],staticClass:"form-input chat-message",attrs:{name:"message",placeholder:"Reply @"+e.user_name.replace("-"," ")},domProps:{value:e.newMessage},on:{keyup:function(s){if(!("button"in s)&&e._k(s.keyCode,"enter",13))return null;e.sendMessage(s)},input:function(s){s.target.composing||(e.newMessage=s.target.value)}}})]),e._v(" "),t("button",{staticClass:"btn btn-right color-1 size-2 hover-1",on:{click:e.sendMessage}},[e._v("reply")])]),e._v(" "),t("div",{staticClass:"visible-responsive hidden responsive-form"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"form-label"},[e._v("Your Message")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],staticClass:"form-input",attrs:{name:"message",placeholder:"Reply @"+e.user_name.replace("-"," ")},domProps:{value:e.newMessage},on:{keyup:function(s){if(!("button"in s)&&e._k(s.keyCode,"enter",13))return null;e.sendMessage(s)},input:function(s){s.target.composing||(e.newMessage=s.target.value)}}}),e._v(" "),t("button",{staticClass:"btn btn-right color-1 size-2 hover-1",on:{click:e.sendMessage}},[e._v("reply")])])])])},staticRenderFns:[]}},53:function(e,s,t){e.exports=t(10)}});